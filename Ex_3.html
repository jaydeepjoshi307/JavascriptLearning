<!DOCTYPE html>
<html>
  <head>
    <title>Apis Play</title>
    <style>
      table {
        border-collapse: collapse;
        width: 100%;
      }

      td,
      th {
        border: 1px solid #000000;
        text-align: left;
        padding: 8px;
      }
    </style>
    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script> -->
    <script src="https://www.tutorialspoint.com/jquery/jquery-3.6.0.js"></script>
  </head>
  <body>
    <script>
      function validateForm() {
        var name = $("#emp__name__id").val();
        var age = $("#emp__age__id").val();
        var salary = $("#emp__salary__id").val();
        // console.log("My name is " + name + ". I am " + age + " years old. My salary is $" + salary +"." );

        var validFormValue = true;
        if (
          name == " " ||
          age == " " ||
          age < 0 ||
          age > 100 ||
          salary == " " ||
          salary < 0
        ) {
          var validFormValue = false;
          // alert("please enter valid details !")
        }
      if (validFormValue == true) {
        updateForm( name, age, salary); 
       } else {
          console.log("Please enter valid Value !");
          return false;
        }
      }
   getTableData();
      function updateForm(name, age, salary) {

  
          // console.log("Apply Post Method !")
          // console.log("My name is " + name + ". I am " + age + " years old. My salary is $" + salary +"." );
          var formData = { name: name, salary: salary, age: age };
          // console.log(formData);

          $.ajax({
            url: "https://dummy.restapiexample.com/api/v1/create",
            type: "POST",
            data: formData,
            success: function (data, textStatus, jqXHR) {
              // console.log("Inside: ");
              // console.log("data: ", data);
              console.log("post status: ", textStatus);
              // console.log("jqXHR: ", jqXHR);
              getTableData();
            },
            error: function (jqXHR, textStatus, errorThrown) {},
          });
      
      }

      function getTableData() {
        console.log("Inside GET Data");
        $.ajax({
          url: "https://dummy.restapiexample.com/api/v1/employees",
          type: "GET",
          success: function (data, textStatus, jqXHR) {
            var range = data.length;
            for (let i = 0; i < range; i++) {
              insertTableData(data[i]);
            }
          },
          error: function (jqXHR, textStatus, errorThrown) {},
        });
      }

      function insertTableData(data) {
        console.log("Inside Insert Table");
        var table = document
          .getElementById("table__data__id")
          .getElementsByTagName("tbody")[0];
          var newRow = table.insertRow(data.length);
          var cell1 = newRow.insertCell(0);
          cell1.innerHTML = data.id;
          var cell2 = newRow.insertCell(1);
          cell2.innerHTML = data.employee_name;
          var cell3 = newRow.insertCell(2);
          cell3.innerHTML = data.employee_salary;
          var cell4 = newRow.insertCell(3);
          cell4.innerHTML = data.employee_age;
      }
    </script>

    <div id="emp__table__id">
      <h1>Employee Detail</h1>
      Name:
      <input
        id="emp__name__id"
        type="text"
        placeholder="Please enter your name"
        required
      />
      Age:
      <input
        id="emp__age__id"
        type="number"
        min="0"
        placeholder="Please enter your age"
        required
      />
      Salary:
      <input
        id="emp__salary__id"
        type="number"
        min="0"
        placeholder="Please enter your salary"
        required
      />
      <button onclick="validateForm()">Save</button>
    </div>

    <div style="margin-top: 2%"></div>

    <div id="div__table__id">
      <table id="table__data__id">
        <thead>
          <tr>
            <th>Emp_ID</th>
            <th>Name</th>
            <th>Salary</th>
            <th>Age</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </body>
</html>

<!-- Create a employee form which has this api for creating employee.


form to create a new record - html css 
save - check validations for name* age and salary thn submit
on submit - get success - show all data in html table -->
